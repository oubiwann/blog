<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
  
  
  
  <head profile="http://dublincore.org/documents/dcq-html/">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1179318-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-1179318-5');
    </script>
    <meta charset="utf-8">
    <title>
    
      oubiwann | blog
      
      
      
    
    </title>
    

    
    
    
    <!-- General Metadata (site-wide) -->
    <meta name="description" content="A 21st century .plan for Duncan McGreggor">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="oubiwann | blog: version 5.0.0-SNAPSHOT, build 8cf312a

">

    <!-- Google Metadata -->
    <meta name="google-site-verification" content="w0pQqmlRRJk36_i3se1w2U7qwG8kS_VqiLS2hq5Wk7g" />

    <!-- Dublic Core Metadata (site-wide) -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/">
    <meta name="DC.format" scheme="DCTERMS.IMT" content="text/html">
    <meta name="DC.type" scheme="DCTERMS.DCMIType" content="Text">
    <meta name="DC.coverage" content="2003-2019">
    <meta name="DC.rights" content="Creative Commons Attribution-ShareAlike 4.0 International License">
    <meta name="DC.publisher" content="C&amp;B|Books">
    <meta name="DCTERMS.audience" content="Developers, Software Engineers, Computer Scientists, Technologists, Programmers, Programming Language Enthusiasts, Operational Engineers">

    
    
<!-- General Metadata (per-page) -->
<meta name="author" content="">

<!-- Dublic Core Metadata (per-page) -->
<meta name="DC.title" lang="en" content="Running LFE in Docker">
<meta name="DC.creator" content="oubiwann">
<meta name="DC.subject" content="LFE">
<meta name="DC.date" content="2014-12-07">
<meta name="DC.identifier" scheme="DCTERMS.URI" content="https://oubiwann.github.io/blog/archives/2014-12/07-183708/running-lfe-in-docker.html">
<meta name="DCTERMS.abstract" content="LFE Community is working on growing support for Docker">

<!-- Facebook's OpenGraph Metadata -->
<meta property="og:site_name" content="o|b">
<meta property="og:title" content="Running LFE in Docker">
<meta property="og:url" content="https://oubiwann.github.io/blog/archives/2014-12/07-183708/running-lfe-in-docker.html">
<meta property="og:type" content="blog">
<meta property="og:description" content="LFE Community is working on growing support for Docker">
<meta property="og:image" content="https://oubiwann.github.io/blog/img/ob-post-5.jpg">
<meta property="article:author" content="">
<meta property="article:published_time" content="2014-12-07 18:37:08">
<meta property="article:modified_time" content="">
<meta property="og:updated_time" content="">
<meta property="article:section" content="LFE">


<!-- Twitter Card Metadata -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site:id" content="@oubiwann">
<meta name="twitter:creator:id" content="@ErlangLisp">
<meta name="twitter:title" content="Running LFE in Docker">
<meta name="twitter:url" content="https://oubiwann.github.io/blog/archives/2014-12/07-183708/running-lfe-in-docker.html">
<meta name="twitter:description" content="<p><p><a href="/assets/images/posts/DockerLogo.png"><img class="left thumb" src="{{ site.base_url }}/assets/images/posts/DockerLogo.png" /></a>With the growing prominence of [Docker]() in PaaS offerings, from <a href='https://blog.linode.com/2014/01/03/docker-on-linode/'>Linode</a> and <a href='https://blog.openshift.com/openshift-v3-platform-combines-docker-kubernetes-atomic-and-more/'>OpenShift</a> to <a href='https://cloud.google.com/appengine/docs/managed-vms/custom-runtimes'>Google</a> ...</p>">
<meta name="twitter:image" content="https://oubiwann.github.io/blog/img/ob-post-5.jpg">

    
    

    <link rel="alternate" type="application/atom+xml" title="Feed" href="/blog/atom.xml" />
    

    <!-- Webfonts Setup /-->
    <link href="https://fonts.googleapis.com/css?family=Maitree&amp;subset=latin-ext"
          rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Yantramanav&amp;subset=latin-ext"
          rel="stylesheet" type="text/css">

    <!-- Bootstrap/Custom Styles Setup /-->
    <link rel="stylesheet" href="/blog/assets/highlightjs/styles/arta.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/font-awesome/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/bootswatch/css/custom.min.css" rel="stylesheet" type="text/css" id="theme">
    <link rel="stylesheet" href="/blog/css/theme.css" rel="stylesheet" type="text/css" id="theme" media="screen">

    <!-- Favicon Setup /-->
    <link rel="apple-touch-icon" sizes="180x180" href="/blog/icons/apple-touch-icon.png?v=3">
    <link rel="icon" type="image/png" sizes="32x32" href="/blog/icons/favicon-32x32.png?v=3">
    <link rel="icon" type="image/png" sizes="16x16" href="/blog/icons/favicon-16x16.png?v=3">
    <link rel="manifest" href="/blog/icons/manifest.json?v=3">
    <link rel="mask-icon" href="/blog/icons/safari-pinned-tab.svg?v=3" color="#5bbad5">
    <link rel="shortcut icon" href="/blog/icons/favicon.ico?v=3">
    <meta name="apple-mobile-web-app-title" content="FRMX">
    <meta name="application-name" content="o|b">
    <meta name="msapplication-config" content="/blog/icons/browserconfig.xml?v=3">
    <meta name="theme-color" content="#ffffff">
    
    
    
    
    
  

  </head>
  
  <body>
  
   
    <header class="tiny">
      
<div class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
  <div class="container">
    <div class="navbar-brand-wrapper">
      <a href="/blog/" class="navbar-brand">o|b</a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

   <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/blog/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/archives">Archives</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/categories">Categories</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/tags">Tags</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/authors">Authors</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="about">About <span class="caret"></span></a>
          <div class="dropdown-menu" aria-labelledby="about">
            <a class="dropdown-item" href="/blog/about/">The Blog</a>
            <a class="dropdown-item" href="/blog/about/contact/">Contact Us</a>
            <a class="dropdown-item" href="/blog/about/powered-by/">Powered By</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/blog/about/license/">License</a>
          </div>
        </li>
      </ul>

      <ul class="nav navbar-nav ml-auto social-nav">
        <li class="nav-item">
          <a href="/blog/atom.xml" alt="Atom Feed">
            <i class="fa fa-feed first"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://twitter.com/oubiwann" alt="Twitter">
            <i class="fa fa-twitter"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="/googleplus" alt="Google+">
            <i class="fa fa-google-plus"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="http://github.com/oubiwann" alt="Github">
            <i class="fa fa-github"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://groups.google.com/forum/#!forum/oubiwann-blog-new-posts"
             alt="Email Notifications">
            <i class="fa fa-envelope"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

    </header>
    
    
    <main id="main-content">
      

    <!-- Page Content -->
    <div class="container page-content">

      <div class="row">

        <!-- Post Content Column -->
        <div class="col-lg-12">

          <!-- Title -->
          <h1 class="mt-4">Running LFE in Docker</h1>

          <!-- Author -->
          <p class="lead">
            Posted on December 07,
            2014 by
            <a href="/blog/authors#oubiwann">oubiwann</a>
          </p>

          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link show active" data-toggle="tab" href="#content">Content</a>
            </li>
            <li class="nav-item">
              <a class="nav-link show" data-toggle="tab" href="#metadata">Metadata</a>
            </li>
          </ul>

          <br/>

          <div id="post-content" class="tab-content">
            <div class="tab-pane fade active show" id="content">

          <!-- Post Image -->
          <img class="card-img-top" src="/blog/img/ob-post-5.jpg" alt="Blog post image">

          <hr>

          <!-- Post Content -->
          <p><a href="/assets/images/posts/DockerLogo.png"><img class="left thumb" src="{{ site.base_url }}/assets/images/posts/DockerLogo.png" /></a>With the growing prominence of [Docker]() in PaaS offerings, from <a href='https://blog.linode.com/2014/01/03/docker-on-linode/'>Linode</a> and <a href='https://blog.openshift.com/openshift-v3-platform-combines-docker-kubernetes-atomic-and-more/'>OpenShift</a> to <a href='https://cloud.google.com/appengine/docs/managed-vms/custom-runtimes'>Google</a> and <a href='http://docs.aws.amazon.com/elasticbeanstalk/latest/dg/create_deploy_docker.html'>AWS</a>, it is increasingly more crucial that open source projects support their users by offering images which make deploying their apps even easier. We've only <a href='https://registry.hub.docker.com/u/lfex/lfe/'>just</a> <a href='https://github.com/rvirding/lfe/issues/97'>started</a> doing this in the <a href='http://lfe.io/'>LFE</a> community, but are already quite excited by the possibilities and the early successes we've seen.</p><p>We're currently working on an official LFE image for Docker, but in the mean time, we will demonstrate functionality with an image we've made available on the <a href='https://registry.hub.docker.com/u/lfex/lfe/'>LFE Exchange in Docker Hub</a>.</p><p><strong>UPDATE</strong>: There is an <a href='http://blog.lfe.io/tutorials/2015/11/28/2110-lfe-yaws-docker-update/'>updated blog post</a> for the latest image. Please read that for the quickest possible use of the LFE YAWS Dockerized web app.</p><h2>Background Info</h2><p>For a wonderful intro to Docker, see last year's OpenShift blog post <a href='https://blog.openshift.com/day-21-docker-the-missing-tutorial/'>Day 21: Dockerâ€“The Missing Tutorial</a> by <a href='https://twitter.com/shekhargulati'>Shekhar Gulati</a>. Another <em>fantastic</em> resource is the <a href='https://github.com/wsargent/docker-cheat-sheet'>Docker cheatsheet</a> by <a href='https://github.com/wsargent'>Will Sargent</a> of <a href='https://typesafe.com/'>TypeSafe</a>.</p><p>It goes without saying, but we want to say it anyway: all of the steps below are just as applicable for all languages running on the <a href='http://erlang.org/'>Erlang</a> VM: <a href='http://lfe.io/'>LFE</a>, <a href='http://elixir-lang.org/'>Elixir</a>, <a href='http://joxa.org/'>Joxa</a>, <a href='https://github.com/rvirding/luerl'>Luerl</a>, <a href='https://github.com/rvirding/erlog'>Erlog</a>, <a href='https://github.com/etnt/Haskerl'>Haskerl</a>, and others. (And, of course, non-Erlang languages ... but those guys get enough attention as it is ...)</p><p>Last but not least, when I was setting up the official LFEX org on Docker Hub, I was pleasantly surprised to see that someone had already pushed up <a href='https://registry.hub.docker.com/u/alco/ubuntu-lfe'>an LFE image</a>, one based on Ubuntu. Nice work, <a href='https://twitter.com/true_droid'>Alexei Sholik</a>!</p><h2>Setup</h2><p>This tutorial assumes the following:</p><ul><li>You are using <a href='http://boot2docker.io/'>boot2docker</a><ul><li>You have <a href='https://www.docker.com/'>Docker</a> installed on a host machine</li><li>Both are up and running</li><li>You have exported the Docker environment variables in all the terminal   windows you'll be using (2 to 3 is probably all you need)</li></ul></li></ul><p>In order to connect to your containers on your LAN when running boot2docker, you will need to do something like the following:</p><pre><code class="bash">$ boot2docker ssh -L &lt;HOSTMACHINE&gt;:5099:127.0.0.1:5099
</code></pre><p>The server on my LAN that's running ``boot2docker`` and VirtualBox is 172.16.4.64. So here's the SSH port forwarding setup I ran on 172.16.4.64 in order to have access to my containers from a laptop on the LAN:</p><pre><code class="text">$ boot2docker ssh -L 172.16.4.64:5099:127.0.0.1:5099
                        ##        .
                  ## ## ##       ==
               ## ## ## ##      ===
           /&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;&quot;\&#95;&#95;&#95;/ ===
      &#126;&#126;&#126; {&#126;&#126; &#126;&#126;&#126;&#126; &#126;&#126;&#126; &#126;&#126;&#126;&#126; &#126;&#126; &#126; /  ===- &#126;&#126;&#126;
           \&#95;&#95;&#95;&#95;&#95;&#95; o          &#95;&#95;/
             \    \        &#95;&#95;/
              \&#95;&#95;&#95;&#95;\&#95;&#95;&#95;&#95;&#95;&#95;/
 &#95;                 &#95;   &#95;&#95;&#95;&#95;     &#95;            &#95;
| |&#95;&#95;   &#95;&#95;&#95;   &#95;&#95;&#95; | |&#95;|&#95;&#95;&#95; \ &#95;&#95;| | &#95;&#95;&#95;   &#95;&#95;&#95;| | &#95;&#95;&#95;&#95;&#95; &#95; &#95;&#95;
| '&#95; \ / &#95; \ / &#95; \| &#95;&#95;| &#95;&#95;&#41; / &#95;` |/ &#95; \ / &#95;&#95;| |/ / &#95; \ '&#95;&#95;|
| |&#95;&#41; | &#40;&#95;&#41; | &#40;&#95;&#41; | |&#95; / &#95;&#95;/ &#40;&#95;| | &#40;&#95;&#41; | &#40;&#95;&#95;|   &lt;  &#95;&#95;/ |
|&#95;.&#95;&#95;/ \&#95;&#95;&#95;/ \&#95;&#95;&#95;/ \&#95;&#95;|&#95;&#95;&#95;&#95;&#95;\&#95;&#95;,&#95;|\&#95;&#95;&#95;/ \&#95;&#95;&#95;|&#95;|\&#95;\&#95;&#95;&#95;|&#95;|
Boot2Docker version 1.3.2, build master : 495c19a - Mon Nov 24 20:40:58 UTC 2014
Docker version 1.3.2, build 39fa2fa
docker@boot2docker:&#126;$
</code></pre><p>You'll want to leave that window open :-)</p><p>And why wouldn't you? Just <em>look</em> at that whale!</p><h2>Getting the LFE Exchange Docker Image</h2><p>Assuming you have everything installed and your forwarding is ready to go, let's continue by getting the LFE Docker image:</p><pre><code class="bash">$ docker pull lfex/lfe
</code></pre><p>Once it's finished downloading, you can make sure everything's working by running the default command:</p><pre><code class="bash">$ docker run lfex/lfe
42
</code></pre><p>This image is dead-simple: it's based on ``debian:jessie`` with the standard Erlang package from Debian installed on it (as well as the others needed to support ``git`` and ``rebar``). We're working on support for CentOS, Ubuntu, and OpenSUSE as well.</p><h2>The LFE REPL</h2><p>Those commands are just executing the default ``CMD`` directive provided with the image. We can use this image to run all sorts of commands in the container, such as ``bash``:</p><pre><code class="bash">$ docker run -t -i lfex/lfe /bin/bash
</code></pre><pre><code class="bash">root@95bc1d88e581:/#
</code></pre><p>Hey, I've got an idea ...</p><pre><code class="bash">root@95bc1d88e581:/# lfe
</code></pre><pre><code class="cl">Erlang/OTP 17 &#91;erts-6.2&#93; &#91;source&#93; &#91;64-bit&#93; &#91;smp:8:8&#93; &#91;async-threads:10&#93; &#91;kernel-poll:false&#93;

LFE Shell V6.2 &#40;abort with &#94;G&#41;
&gt; &#40;&#42; 2 &#40;lists:foldl &#40;lambda &#40;n acc&#41; &#40;+ n acc&#41;&#41; 0 &#40;lists:seq 1 6&#41;&#41;&#41;
42
</code></pre><p>While we're in here, let's check out some basic version info:</p><pre><code class="cl">&gt; &#40;erlang:system&#95;info 'otp&#95;release&#41;
&quot;17&quot;
&gt; &#40;erlang:system&#95;info 'version&#41;
&quot;6.2&quot;
&gt; &#40;erlang:system&#95;info 'driver&#95;version&#41;
&quot;3.1&quot;
</code></pre><p>Let's quit out:</p><pre><code class="cl">&gt; &#94;g
User switch command
 --&gt; q
</code></pre><pre><code class="bash">root@c384176355bd:/# exit
exit
</code></pre><p>We're no longer running that container, but it still exists:</p><pre><code class="bash">$ docker ps -a
CONTAINER ID   IMAGE         COMMAND       CREATED    STATUS
0a9b061634b5   f80fa561b172  &quot;/bin/bash&quot;   47 s ago   Exited &#40;0&#41; 12 seconds ago
</code></pre><p>But you know what? We can do even better than ``bash`` ... by jumping directly into our favourite REPL :-)</p><pre><code class="bash">$ docker run -t -i lfex/lfe /usr/bin/lfe
</code></pre><pre><code class="cl">Erlang/OTP 17 &#91;erts-6.2&#93; &#91;source&#93; &#91;64-bit&#93; &#91;smp:8:8&#93; &#91;async-threads:10&#93; &#91;kernel-poll:false&#93;

LFE Shell V6.2 &#40;abort with &#94;G&#41;
&gt; &#40;&#42; 2 &#40;lists:foldl &#40;lambda &#40;n acc&#41; &#40;+ n acc&#41;&#41; 0 &#40;lists:seq 1 42&#41;&#41;&#41;
1806
&gt; &#94;g
User switch command
 --&gt; q
</code></pre><pre><code class="bash">$
</code></pre><p>Quitting brought us all the way out, bask to the host machine.</p><h2>A Simple Customisation of the LFE ``Dockerfile``</h2><p>So far:</p><ul><li>We have obtained the LFE image from Docker Hub on our local machine<ul><li>We've run it with the default ``CMD``</li><li>We've run it with some custom commands</li></ul></li></ul><p>Now we should be comfortable enough using this image to create our own variation, based on it. We'll start simple, thought, with a single change to ``CMD``.</p><pre><code class="bash">$ mkdir /tmp/lfe
$ cd /tmp/lfe
$ vi Dockerfile
</code></pre><p>Copy the following into this new file (which is just a change of the original, upstream ``lfex/lfe`` ``Dockerfile`` from ``6`` to ``42``):</p><pre><code class="dockerfile">FROM lfex/lfe
CMD /usr/bin/lfe -eval &quot;&#40;io:format \&quot;&#126;p&#126;n\&quot;  \
    &#40;list &#40;&#42; 2 &#40;lists:foldl &#40;lambda &#40;n acc&#41; &#40;+ n acc&#41;&#41; 0 &#40;lists:seq 1 42&#41;&#41;&#41;&#41;&#41;&quot;
</code></pre><p>Save and quit:</p><pre><code class="vim">x:
</code></pre><p>And build your new Docker image:</p><pre><code class="bash">$ docker build .
...
Removing intermediate container 73cea1afcab1
Successfully built 46957afffb2c
</code></pre><p>Looking in the output of that last command, we can see that our new image has an ID of ``46957afffb2c``. Let's tag it (using your own image, of course):</p><pre><code class="bash">$ docker tag 46957afffb2c crazy42
</code></pre><p>And run it:</p><pre><code class="bash">$ docker run crazy42
1806
</code></pre><p>Excellent &ndash; that's the right answer :-)</p><p>Let's take a look at our images so far:</p><pre><code class="bash">$ docker images
REPOSITORY      TAG          IMAGE ID          CREATED             VIRTUAL SIZE
crazy42         latest       46957afffb2c      45 minutes ago      521.9 MB
lfe             latest       e7554d932622      About an hour ago   521.9 MB
lfex/lfe        latest       e7554d932622      About an hour ago   521.9 MB
debian          jessie       aaabd2b41e22      4 weeks ago         154.7 MB
</code></pre><p>Ready to create another one?</p><h2>A Simple LFE/YAWS Web App Image</h2><p>Let's go nuts!</p><pre><code class="bash">$ mkdir /tmp/sample-app
$ cd /tmp/sample-app
$ vi Dockerfile
</code></pre><pre><code class="dockerfile">FROM lfex/lfe

ENV APP&#95;DIR /opt/sample-app
ENV APP&#95;REPO https://github.com/oubiwann/docker-lfe-yaws-sample-app.git
ENV DEPS&#95;DIR $APP&#95;DIR/deps
ENV YAWS&#95;DIR $DEPS&#95;DIR/yaws
ENV YAWS&#95;APP&#95;ID sampleapp
ENV LFE&#95;DEPS $DEPS&#95;DIR/lutil:$DEPS&#95;DIR/exemplar:$DEPS&#95;DIR/lfest
ENV DEPS $YAWS&#95;DIR:$LFE&#95;DEPS:$DEPS&#95;DIR/ibrowse
ENV ERL&#95;LIBS $ERL&#95;LIBS:/opt/erlang/lfe:$DEPS

RUN apt-get update &amp;&amp; apt-get install -y \
        libpam0g-dev

RUN git clone $APP&#95;REPO $APP&#95;DIR &amp;&amp; \
        cd $APP&#95;DIR &amp;&amp; \
        rebar compile

EXPOSE 5099

CMD sh -c &quot;/opt/sample-app/bin/daemon;while true; do sleep 10; done&quot;
</code></pre><pre><code class="vim">:x
</code></pre><pre><code class="bash">$ docker build .
...
Successfully built 1904cb1d856b
</code></pre><p>Now we can tag it:</p><pre><code class="bash">$ docker tag 1904cb1d856b sample-app
</code></pre><p>And then run it!</p><pre><code class="bash">$ docker run -d -p 5099:5099 sample-app
1b21f79c42ec84cec841b25ff17e921b4d4ce8ee247c5293d5c0d73766a4c713
</code></pre><p>Let's make sure that it's running and that our port is exposed:</p><pre><code class="bash">$ docker ps
CONTAINER ID   IMAGE               COMMAND                STATUS         PORTS
1b21f79c42ec   sample-app:latest   &quot;\&quot;/bin/sh -c 'sh -c   Up 6 seconds   0.0.0.0:5099-&gt;5099/tcp
</code></pre><p>And then open up <a href="http://172.16.4.64:5099">http://172.16.4.64:5099</a> (or whatever host you setup for SSH port forwarding) in a web browser. You should be greeted with something that looks like this:</p><p><img src="{{ site.base_url }}/assets/images/posts/docker-lfe-sample-app-main-page.png" /></p><p>And that's all there is to it!</p><h2>An LFE Web App Aside</h2><p>If you'd like to look at the source code for this sample app, it has been made available here:</p><ul><li><a href='https://github.com/oubiwann/docker-lfe-yaws-sample-app'>https://github.com/oubiwann/docker-lfe-yaws-sample-app</a></li></ul><p>It takes advantage of two interesting LFE libraries:</p><ul><li><a href='https://github.com/lfex/lfest'>lfest</a> - a   Clojure/<a href='https://github.com/weavejester/compojure'>Compojure</a>-like   macro for defining app routes<ul><li><a href='https://github.com/lfex/exemplar'>exemplar</a> - an LFE library for HTML as   LFE-native s-expressions</li></ul></li></ul><p>Here are some highlights from the sample app:</p><h3>Routes</h3><pre><code class="cl">&#40;defroutes
  &#40;'GET &quot;/&quot;
    &#40;sample-app-content:get-sidebar-content arg-data&#41;&#41;
  &#40;'GET &quot;/content/:id&quot;
    &#40;sample-app-content:get-content id arg-data&#41;&#41;
  &#40;'GET &quot;/relation/:userid/:accountid&quot;
    &#40;sample-app-content:get-content userid accountid arg-data&#41;&#41;
  ;; When nothing matches, do this
  &#40;'NOTFOUND
   &#40;let&#42; &#40;&#40;joined-path &#40;++ &quot;/&quot; &#40;string:join path &quot;/&quot;&#41;&#41;&#41;
          &#40;msg &#40;++ &quot;Unmatched route!&#126;n&#126;n&quot;
                   &quot;Path-info: &#126;p&#126;n&quot;
                   &quot;joined path: &#126;p&#126;n&quot;
                   &quot;arg-data: &#126;p&#126;n&#126;n&quot;&#41;&#41;
          &#40;msg-args `&#40;,path ,joined-path ,arg-data&#41;&#41;&#41;
    &#40;io:format msg msg-args&#41;
    &#40;sample-app-content:four-oh-four
      &#40;++ &#40;strong &quot;Unmatched Route: &quot;&#41; joined-path&#41;&#41;&#41;&#41;&#41;
</code></pre><h3>Exemplar Content</h3><pre><code class="cl">&#40;defun get-side-menu &#40;&#41;
  &quot;An example reusable menu.&quot;
  &#40;list
    &#40;li &#40;a '&#40;href &quot;/&quot;&#41; &quot;Main Page&quot;&#41;&#41;
    &#40;li &#40;a '&#40;href &quot;/content/1&quot;&#41; &quot;/content/1&quot;&#41;&#41;
    &#40;li &#40;a '&#40;href &quot;/content/2&quot;&#41; &quot;/content/2&quot;&#41;&#41;
    &#40;li &#40;a '&#40;href &quot;/content/3&quot;&#41; &quot;/content/3&quot;&#41;&#41;
    &#40;li &#40;a '&#40;href &quot;/relation/1/2&quot;&#41; &quot;/relation/1/2&quot;&#41;&#41;
    &#40;li &#40;a '&#40;href &quot;/bob&quot;&#41; &quot;404&quot;&#41;&#41;&#41;&#41;
</code></pre><h2>Closing</h2><p>There are soooo many more examples and use cases to explore. Hopefully we'll be putting some of those up on this blog for the benefit and interest of our kind readers.</p><p>If you have any questions about the material here, be sure to stop by the <a href='https://groups.google.com/forum/#!forum/lisp-flavoured-erlang'>LFE mail list</a> and let us know.</p><p>Also, you have any any success stories, cool new LFE Docker images, or other amazing tales to share, we want to hear there :-)</p><p>See you there!</p>

            </div>
            <div class="tab-pane fade" id="metadata">

              <table class="table table-hover">
                <tbody>
                  <tr class="table-secondary">
                    <th scope="row">Author</th>
                    <td>oubiwann</td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Date</th>
                    <td>December 07,
        2014</td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Time</th>
                    <td>18:37:08</td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Category</th>
                    <td>
                        <a href="/blog/categories/#LFE">LFE</a>
                    </td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Tags</th>
                    <td>
                      
                      <a href="/blog/tags/#apps">apps</a>
                      
                      <a href="/blog/tags/#boot2docker">boot2docker</a>
                      
                      <a href="/blog/tags/#devops">devops</a>
                      
                      <a href="/blog/tags/#docker">docker</a>
                      
                      <a href="/blog/tags/#exemplar">exemplar</a>
                      
                      <a href="/blog/tags/#howtos">howtos</a>
                      
                      <a href="/blog/tags/#lfest">lfest</a>
                      
                      <a href="/blog/tags/#ops">ops</a>
                      
                      <a href="/blog/tags/#paas">paas</a>
                      
                      <a href="/blog/tags/#web">web</a>
                      
                    </td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Line&nbsp;Count</th>
                    <td>128 </td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Word&nbsp;Count</th>
                    <td>1472 </td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Character&nbsp;Count</th>
                    <td>15103 </td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <hr>

          <!-- Comments Note -->
          <div class="card my-4">
            <h5 class="card-header">Comments?</h5>
            <div class="card-body">
              This blog doesn't use standard (embedded) comments; however, since
              the site is hosted on Github, if there <emphasis>is</emphasis>
              something you'd like to share, please do so by
              <a href="https://github.com/oubiwann/blog/issues/new">opening a
              "comment" ticket!</a>
            </div>
          </div>

        </div>

      </div>
      <!-- /.row -->

    </div>
    <!-- /.container -->

<!-- End main page content -->

    </main>
    
    
    <footer id="footer">
      
        <div class="row">
          <div class="col-lg-6">

            <ul class="list-unstyled">
              <li class="text-muted">Blogs</li>
              <li><a href="http://oubiwann.blogspot.com">Electric Duncan</a></li>
              <li><a href="http://blog.lfe.io/">LFE Blog</a></li>
              <li><a href="http://clojang.lfe.io/">Clojang</a></li>
              <li><a href="https://clozhang.github.io/blog/">Clozhang</a></li>
            </ul>

          </div>
          <div class="col-lg-6">
            <ul class="list-unstyled">
              <li class="float-lg-right text-muted">Github orgs</li>
              <li class="float-lg-right"><a href="https://github.com/erlsci">erlsci</a></li>
              <li class="float-lg-right"><a href="https://github.com/lfex">lfex</a></li>
              <li class="float-lg-right"><a href="https://github.com/clozhang">clozhang</a></li>
              <li class="float-lg-right"><a href="https://github.com/clojang">clojang</a></li>
              <li class="float-lg-right"><a href="https://github.com/clojusc">clojusc</a></li>
              <li class="float-lg-right"><a href="https://github.com/hexagram30">hexagram30</a></li>
            </ul>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
          </div>
          <div class="col-lg-6">
            <ul class="list-unstyled">

              <li class="float-lg-right"><a href="https://github.com/masteringmatplotlib">masteringmatplotlib</a></li>
              <li class="float-lg-right"><a href="https://github.com/usgs-lcmap">usgs-lcmap</a></li>
              <li class="float-lg-right"><a href="https://github.com/nasa-ngap-archives">nasa-ngap-archives</a></li>
              <li class="float-lg-right"><a href="https://github.com/nasa-cmr-archives">nasa-cmr-archives</a></li>

            </ul>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <p><a href="http://creativecommons.org/licenses/by-sa/4.0/">
              <img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
            </a></p>
            <p class="text-muted">Content released under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License.</a>.</p>
            <p class="text-muted">Copyright &copy; Duncan McGreggor, 2003-2019</p>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <p class="text-muted">Design adapted from the Bootswatch
              <a href="https://bootswatch.com/darkly/">Darkly</a> theme.
            </p>
          </div>
        </div>


    </footer>
    
    
    <script src="/blog/assets/jquery/dist/jquery.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/popper.js/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/bootstrap/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/bootswatch/js/custom.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
  
  </body>
</html>
