<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
  
  
  
  <head profile="http://dublincore.org/documents/dcq-html/">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1179318-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-1179318-5');
    </script>
    <meta charset="utf-8">
    <title>
    
      oubiwann | blog
      
      
      
    
    </title>
    

    
    
    
    <!-- General Metadata (site-wide) -->
    <meta name="description" content="A 21st century .plan for Duncan McGreggor">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="oubiwann | blog: version 5.0.0-SNAPSHOT, build 8cf312a

">

    <!-- Google Metadata -->
    <meta name="google-site-verification" content="w0pQqmlRRJk36_i3se1w2U7qwG8kS_VqiLS2hq5Wk7g" />

    <!-- Dublic Core Metadata (site-wide) -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/">
    <meta name="DC.format" scheme="DCTERMS.IMT" content="text/html">
    <meta name="DC.type" scheme="DCTERMS.DCMIType" content="Text">
    <meta name="DC.coverage" content="2003-2019">
    <meta name="DC.rights" content="Creative Commons Attribution-ShareAlike 4.0 International License">
    <meta name="DC.publisher" content="C&amp;B|Books">
    <meta name="DCTERMS.audience" content="Developers, Software Engineers, Computer Scientists, Technologists, Programmers, Programming Language Enthusiasts, Operational Engineers">

    
    
<!-- General Metadata (per-page) -->
<meta name="author" content="">

<!-- Dublic Core Metadata (per-page) -->
<meta name="DC.title" lang="en" content="Object Publishing with Nevow">
<meta name="DC.creator" content="oubiwann">
<meta name="DC.subject" content="">
<meta name="DC.date" content="2007-02-27">
<meta name="DC.identifier" scheme="DCTERMS.URI" content="https://oubiwann.github.io/blog/archives/2007-02/27-152908/object-publishing-with-nevow.html">
<meta name="DCTERMS.abstract" content="">

<!-- Facebook's OpenGraph Metadata -->
<meta property="og:site_name" content="o|b">
<meta property="og:title" content="Object Publishing with Nevow">
<meta property="og:url" content="https://oubiwann.github.io/blog/archives/2007-02/27-152908/object-publishing-with-nevow.html">
<meta property="og:type" content="blog">
<meta property="og:description" content="">
<meta property="og:image" content="https://oubiwann.github.io/blog/img/ob-post-7.jpg">
<meta property="article:author" content="">
<meta property="article:published_time" content="2007-02-27 15:29:08">
<meta property="article:modified_time" content="">
<meta property="og:updated_time" content="">
<meta property="article:section" content="">


<!-- Twitter Card Metadata -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site:id" content="@oubiwann">
<meta name="twitter:creator:id" content="@oubiwann">
<meta name="twitter:title" content="Object Publishing with Nevow">
<meta name="twitter:url" content="https://oubiwann.github.io/blog/archives/2007-02/27-152908/object-publishing-with-nevow.html">
<meta name="twitter:description" content="<p><p><b>Update</b>: Code for the "Nevow Object Series" of blog posts is available <a href="http://adytum.svn.sourceforge.net/viewvc/adytum/Docs/nevow/objectpubl ishing/introduction/">here</a>. Note that the examples can be viewed and run as ...</p>">
<meta name="twitter:image" content="https://oubiwann.github.io/blog/img/ob-post-7.jpg">

    
    

    <link rel="alternate" type="application/atom+xml" title="Feed" href="/blog/atom.xml" />
    

    <!-- Webfonts Setup /-->
    <link href="https://fonts.googleapis.com/css?family=Maitree&amp;subset=latin-ext"
          rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Yantramanav&amp;subset=latin-ext"
          rel="stylesheet" type="text/css">

    <!-- Bootstrap/Custom Styles Setup /-->
    <link rel="stylesheet" href="/blog/assets/highlightjs/styles/arta.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/font-awesome/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/bootswatch/css/custom.min.css" rel="stylesheet" type="text/css" id="theme">
    <link rel="stylesheet" href="/blog/css/theme.css" rel="stylesheet" type="text/css" id="theme" media="screen">

    <!-- Favicon Setup /-->
    <link rel="apple-touch-icon" sizes="180x180" href="/blog/icons/apple-touch-icon.png?v=3">
    <link rel="icon" type="image/png" sizes="32x32" href="/blog/icons/favicon-32x32.png?v=3">
    <link rel="icon" type="image/png" sizes="16x16" href="/blog/icons/favicon-16x16.png?v=3">
    <link rel="manifest" href="/blog/icons/manifest.json?v=3">
    <link rel="mask-icon" href="/blog/icons/safari-pinned-tab.svg?v=3" color="#5bbad5">
    <link rel="shortcut icon" href="/blog/icons/favicon.ico?v=3">
    <meta name="apple-mobile-web-app-title" content="FRMX">
    <meta name="application-name" content="o|b">
    <meta name="msapplication-config" content="/blog/icons/browserconfig.xml?v=3">
    <meta name="theme-color" content="#ffffff">
    
    
    
    
    
  

  </head>
  
  <body>
  
   
    <header class="tiny">
      
<div class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
  <div class="container">
    <div class="navbar-brand-wrapper">
      <a href="/blog/" class="navbar-brand">o|b</a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

   <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/blog/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/archives">Archives</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/categories">Categories</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/tags">Tags</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/authors">Authors</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="about">About <span class="caret"></span></a>
          <div class="dropdown-menu" aria-labelledby="about">
            <a class="dropdown-item" href="/blog/about/">The Blog</a>
            <a class="dropdown-item" href="/blog/about/contact/">Contact Us</a>
            <a class="dropdown-item" href="/blog/about/powered-by/">Powered By</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/blog/about/license/">License</a>
          </div>
        </li>
      </ul>

      <ul class="nav navbar-nav ml-auto social-nav">
        <li class="nav-item">
          <a href="/blog/atom.xml" alt="Atom Feed">
            <i class="fa fa-feed first"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://twitter.com/oubiwann" alt="Twitter">
            <i class="fa fa-twitter"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="/googleplus" alt="Google+">
            <i class="fa fa-google-plus"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="http://github.com/oubiwann" alt="Github">
            <i class="fa fa-github"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://groups.google.com/forum/#!forum/oubiwann-blog-new-posts"
             alt="Email Notifications">
            <i class="fa fa-envelope"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

    </header>
    
    
    <main id="main-content">
      

    <!-- Page Content -->
    <div class="container page-content">

      <div class="row">

        <!-- Post Content Column -->
        <div class="col-lg-12">

          <!-- Title -->
          <h1 class="mt-4">Object Publishing with Nevow</h1>

          <!-- Author -->
          <p class="lead">
            Posted on February 27,
            2007 by
            <a href="/blog/authors#oubiwann">oubiwann</a>
          </p>

          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link show active" data-toggle="tab" href="#content">Content</a>
            </li>
            <li class="nav-item">
              <a class="nav-link show" data-toggle="tab" href="#metadata">Metadata</a>
            </li>
          </ul>

          <br/>

          <div id="post-content" class="tab-content">
            <div class="tab-pane fade active show" id="content">

          <!-- Post Image -->
          <img class="card-img-top" src="/blog/img/ob-post-7.jpg" alt="Blog post image">

          <hr>

          <!-- Post Content -->
          <p><b>Update</b>: Code for the "Nevow Object Series" of blog posts is available <a href="http://adytum.svn.sourceforge.net/viewvc/adytum/Docs/nevow/objectpubl ishing/introduction/">here</a>. Note that the examples can be viewed and run as single files or "project style" with code broken out into separate files.<br /><br />Object publishing is a very simple concept: making code objects accessible over some medium. The medium most often discussed, due to the prevalence of web applications is HTTP/S. For our purposes, the published objects we will discuss are instantiations of python classes written to provide resources over the network.<br /><br />In the python community, the most famous example of object publishing is the Zope application server. Zope exposes object written in python or with various Zope scripts/products/etc. In an old <a href="http://www.zope.org/Documentation/Books/ZDG/current">Zope 2 Book</a>, Zope's object publishing is broken down very simply:<br /><ol><li>The client sends a request to the server</li><li>The server locates the object using the request URL as a map</li><li>The server calls the published object with arguments from the request.</li><li>The server interprets and returns the results to the client</li></ol>What we have here is essentially object look-ups by URL. Given the web context, this makes obvious sense.<br /><br />With such a simple definition of "object publishing", we can begin seeing "object publishing" pretty much anywhere python is used to deliver content or other resources on the web. For instance, <a href="http://www.djangoproject.com/">Django</a> qualifies as having an object publisher by means of the configuration mechanism whereby one can use regular expressions to map URLs to its "view" objects. We'll come back to Django in a bit.<br /><br /><a href="http://twistedmatrix.com/trac">Twisted</a>'s web "framework" <a href="http://divmod.org/trac/wiki/DivmodNevow%20Nevow">Nevow</a> has a object-publishing capabilities that, due to it being controlled by python classes is limited only by the python code you can write. There are four primary mechanisms by which one can publish objects in Nevow:<br /><ul><li>child attributes on a resource</li><li>child methods on a resource, or</li><li>dynamic children using the <span style="font-family:monospace;font-size:9pt;">childFactory()</span> method</li> <li>manipulating the traversal of objects via <span style="font-family:monospace;font-size:9pt;">locateChild()</span> method</li>< /ul>I will be focusing on the first two, however, before showing examples of these let's cover some minimal background. Twisted services are commonly run using what's called a <span style="font-family:monospace;font-size:9pt;">.tac</span> file ("Twisted Application Configuration"). Here is a trivial example of this:<br /><pre>from twisted.application import service<br />from twisted.application import strports<br /><br />from nevow import appserver<br /><br />import stuff<br /><br /># instantiate the application<br />application = service.Application('Site')<br /><br /># set up the main resource<br />root = mystuff.SiteRoot()<br />site = appserver.NevowSite(root)<br /><br /># setup the web server<br />server = strports.service('tcp:8080', site)<br />server.setServiceParent(application)<br /></pre>Give than this file was saved as <span style="font-family:monospace;font-size:9pt;">site.tac</span> (and that there was a sibling file named <span style="font-family:monospace;font-size:9pt;">stuff.py</span> with the resource <span style="font-family:monospace;font-size:9pt;">SiteRoot</span> defined), you would enter <span style="font-family:monospace;font-size:9pt;">twistd -noy site.tac</span> at the system prompt to run this. This would start a server listening on port 8080. But what is <span style="font-family:monospace;font-size:9pt;">SiteRoot</span>? It is a resource we are making available at the root of our application, "publishing" it at http://localhost:8080/. And what would it look like, you ask? Well, a silly example of <span style="font-family:monospace;font-size:9pt;">stuff.py </span>that define <span style="font-family:monospace;font-size:9pt;">SiteRoot</span> might be something like the following:<br /><pre>from nevow import rend<br />from nevow import loaders<br /><br />class SiteRoot(rend.Page):<br /><br /> docFactory = loaders.xmlstr('''&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0<br /> Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;<br /> &lt;html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"<br /> xmlns:nevow="http://nevow.com/ns/nevow/0.1"&gt;<br /> &lt;/html&gt;''')<br /></pre>One reason that this is a silly example is that it does nothing other than declare that the published resource will be an XHTML file with a Nevow namespace, providing no methods (and little content). Additionally, it uses the XML "string" loader, instead of using <a href="http://www.kieranholland.com/code/documentation/nevow-stan/">stan</a> or the XML file loader (for using templates from disk). Regardless, if we add a child attribute that points to another class, we can start to see the object publishing behavior of Nevow:<br /><pre>from nevow import rend<br />from nevow import loaders<br /><br />class MyStuffResource(rend.Page):<br /><br /> docFactory = loaders.xmlstr('''&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0<br /> Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;<br /> &lt;html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"<br /> xmlns:nevow="http://nevow.com/ns/nevow/0.1"&gt;<br /> &lt;h1&gt;My Stuff&lt;/h1&gt;<br /> &lt;/html&gt;''')<br /><br />class SiteRoot(rend.Page):<br /><br /> docFactory = loaders.xmlstr('''&lt;!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0<br /> Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"&gt;<br /> &lt;html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"<br /> xmlns:nevow="http://nevow.com/ns/nevow/0.1"&gt;<br /> &lt;/html&gt;''')<br /><br /> child_mystuff = MyStuffResource()<br /></pre>Starting up our application with these changes will allow us to access the root and child object via the following URLs, respectively:<br /><ul><li>http://localhost:8080/</li><li>http://localhost:8080/mystuff</li></u l>This demonstrates how to publish objects via the <span style="font-family:monospace;font-size:9pt;">child_</span> attribute. <span style="font-family:monospace;font-size:9pt;">child_*() </span>methods do the same thing, while offering all the flexibility that comes with methods. For instance, we could define the method <span style="font-family:monospace;font-size:9pt;">child_yourstuff(self, context) </span>in <span style="font-family:monospace;font-size:9pt;">SiteRoot </span>that would check for your username in the application cookie and pass that info when instantiating a <span style="font-family:monospace;font-size:9pt;">UserStuffResource</span> class. Then the URL http://localhost:8080/yourstuff could publish data specific to whatever was available in a data source associated with the username. The <span style="font-family:monospace;font-size:9pt;">child_*() </span>methods do need to return a resource object, though.<br /><br />This has been a brief run-down on how you can use <span style="font-family:monospace;font-size:9pt;">child_*()</span> methods and <span style="font-family:monospace;font-size:9pt;">child_</span> attributes to publish objects. In the next installment, I will show how to customize URL traversal for accessing these resources via the <span style="font-family:monospace;font-size:9pt;">locateChild()</span> method. In particular, I will show how to duplicate the Django URL conf functionality in Nevow.<br /><br /><!&ndash; technorati tags start &ndash;><p style="text-align:right;font-size:10px;">Technorati Tags: <a href="http://www.technorati.com/tag/nevow" rel="tag">nevow</a>, <a href="http://www.technorati.com/tag/python" rel="tag">python</a>, <a href="http://www.technorati.com/tag/twisted" rel="tag">twisted</a>, <a href="http://www.technorati.com/tag/web" rel="tag">web</a></p><!&ndash; technorati tags end &ndash;></p>

            </div>
            <div class="tab-pane fade" id="metadata">

              <table class="table table-hover">
                <tbody>
                  <tr class="table-secondary">
                    <th scope="row">Author</th>
                    <td>oubiwann</td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Date</th>
                    <td>February 27,
        2007</td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Time</th>
                    <td>15:29:08</td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Category</th>
                    <td>
                        <a href="/blog/categories/#"></a>
                    </td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Tags</th>
                    <td>
                      
                    </td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Line&nbsp;Count</th>
                    <td>1 </td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Word&nbsp;Count</th>
                    <td>881 </td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Character&nbsp;Count</th>
                    <td>8175 </td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <hr>

          <!-- Comments Note -->
          <div class="card my-4">
            <h5 class="card-header">Comments?</h5>
            <div class="card-body">
              This blog doesn't use standard (embedded) comments; however, since
              the site is hosted on Github, if there <emphasis>is</emphasis>
              something you'd like to share, please do so by
              <a href="https://github.com/oubiwann/blog/issues/new">opening a
              "comment" ticket!</a>
            </div>
          </div>

        </div>

      </div>
      <!-- /.row -->

    </div>
    <!-- /.container -->

<!-- End main page content -->

    </main>
    
    
    <footer id="footer">
      
        <div class="row">
          <div class="col-lg-6">

            <ul class="list-unstyled">
              <li class="text-muted">Blogs</li>
              <li><a href="http://oubiwann.blogspot.com">Electric Duncan</a></li>
              <li><a href="http://blog.lfe.io/">LFE Blog</a></li>
              <li><a href="http://clojang.lfe.io/">Clojang</a></li>
              <li><a href="https://clozhang.github.io/blog/">Clozhang</a></li>
            </ul>

          </div>
          <div class="col-lg-6">
            <ul class="list-unstyled">
              <li class="float-lg-right text-muted">Github orgs</li>
              <li class="float-lg-right"><a href="https://github.com/erlsci">erlsci</a></li>
              <li class="float-lg-right"><a href="https://github.com/lfex">lfex</a></li>
              <li class="float-lg-right"><a href="https://github.com/clozhang">clozhang</a></li>
              <li class="float-lg-right"><a href="https://github.com/clojang">clojang</a></li>
              <li class="float-lg-right"><a href="https://github.com/clojusc">clojusc</a></li>
              <li class="float-lg-right"><a href="https://github.com/hexagram30">hexagram30</a></li>
            </ul>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
          </div>
          <div class="col-lg-6">
            <ul class="list-unstyled">

              <li class="float-lg-right"><a href="https://github.com/masteringmatplotlib">masteringmatplotlib</a></li>
              <li class="float-lg-right"><a href="https://github.com/usgs-lcmap">usgs-lcmap</a></li>
              <li class="float-lg-right"><a href="https://github.com/nasa-ngap-archives">nasa-ngap-archives</a></li>
              <li class="float-lg-right"><a href="https://github.com/nasa-cmr-archives">nasa-cmr-archives</a></li>

            </ul>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <p><a href="http://creativecommons.org/licenses/by-sa/4.0/">
              <img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
            </a></p>
            <p class="text-muted">Content released under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License.</a>.</p>
            <p class="text-muted">Copyright &copy; Duncan McGreggor, 2003-2019</p>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <p class="text-muted">Design adapted from the Bootswatch
              <a href="https://bootswatch.com/darkly/">Darkly</a> theme.
            </p>
          </div>
        </div>


    </footer>
    
    
    <script src="/blog/assets/jquery/dist/jquery.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/popper.js/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/bootstrap/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/bootswatch/js/custom.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
  
  </body>
</html>
