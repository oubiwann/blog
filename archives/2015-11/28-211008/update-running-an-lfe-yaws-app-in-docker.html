<!DOCTYPE html>
<!--[if lt IE 7]>      <html lang="en" class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html lang="en" class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html lang="en" class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!-->
<html lang="en" class="no-js"> <!--<![endif]-->
  
  
  
  <head profile="http://dublincore.org/documents/dcq-html/">
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-1179318-5"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'UA-1179318-5');
    </script>
    <meta charset="utf-8">
    <title>
    
      oubiwann | blog
      
      
      
    
    </title>
    

    
    
    
    <!-- General Metadata (site-wide) -->
    <meta name="description" content="A 21st century .plan for Duncan McGreggor">
    <meta name="viewport" content="width=device-width">
    <meta name="generator" content="oubiwann | blog: version 5.0.0-SNAPSHOT, build 38c457a

">

    <!-- Google Metadata -->
    <meta name="google-site-verification" content="w0pQqmlRRJk36_i3se1w2U7qwG8kS_VqiLS2hq5Wk7g" />

    <!-- Dublic Core Metadata (site-wide) -->
    <link rel="schema.DC" href="http://purl.org/dc/elements/1.1/">
    <link rel="schema.DCTERMS" href="http://purl.org/dc/terms/">
    <meta name="DC.format" scheme="DCTERMS.IMT" content="text/html">
    <meta name="DC.type" scheme="DCTERMS.DCMIType" content="Text">
    <meta name="DC.coverage" content="2003-2019">
    <meta name="DC.rights" content="Creative Commons Attribution-ShareAlike 4.0 International License">
    <meta name="DC.publisher" content="C&amp;B|Books">
    <meta name="DCTERMS.audience" content="Developers, Software Engineers, Computer Scientists, Technologists, Programmers, Programming Language Enthusiasts, Operational Engineers">

    
    
<!-- General Metadata (per-page) -->
<meta name="author" content="">

<!-- Dublic Core Metadata (per-page) -->
<meta name="DC.title" lang="en" content="Update: Running an LFE YAWS app in Docker">
<meta name="DC.creator" content="oubiwann">
<meta name="DC.subject" content="LFE">
<meta name="DC.date" content="2015-11-28">
<meta name="DC.identifier" scheme="DCTERMS.URI" content="https://oubiwann.github.io/blog/archives/2015-11/28-211008/update-running-an-lfe-yaws-app-in-docker.html">
<meta name="DCTERMS.abstract" content="Docker LFE/YAWS sample app has been updated">

<!-- Facebook's OpenGraph Metadata -->
<meta property="og:site_name" content="o|b">
<meta property="og:title" content="Update: Running an LFE YAWS app in Docker">
<meta property="og:url" content="https://oubiwann.github.io/blog/archives/2015-11/28-211008/update-running-an-lfe-yaws-app-in-docker.html">
<meta property="og:type" content="blog">
<meta property="og:description" content="Docker LFE/YAWS sample app has been updated">
<meta property="og:image" content="https://oubiwann.github.io/blog/img/ob-post-7.jpg">
<meta property="article:author" content="">
<meta property="article:published_time" content="2015-11-28 21:10:08">
<meta property="article:modified_time" content="">
<meta property="og:updated_time" content="">
<meta property="article:section" content="LFE">


<!-- Twitter Card Metadata -->
<meta name="twitter:card" content="summary_large_image">
<meta name="twitter:site:id" content="@oubiwann">
<meta name="twitter:creator:id" content="@ErlangLisp">
<meta name="twitter:title" content="Update: Running an LFE YAWS app in Docker">
<meta name="twitter:url" content="https://oubiwann.github.io/blog/archives/2015-11/28-211008/update-running-an-lfe-yaws-app-in-docker.html">
<meta name="twitter:description" content="<p><p><a href="/assets/images/posts/DockerLogo.png"><img class="left thumb" src="{{ site.base_url }}/assets/images/posts/DockerLogo.png" /></a>Last December we posted a <a href='/tutorials/2014/12/07/1837-running-lfe-in-docker/'>blog entry</a> about Docker <a href='https://www.docker.com/'>Docker</a> and LFE. Since that time there ...</p>">
<meta name="twitter:image" content="https://oubiwann.github.io/blog/img/ob-post-7.jpg">

    
    

    <link rel="alternate" type="application/atom+xml" title="Feed" href="/blog/atom.xml" />
    

    <!-- Webfonts Setup /-->
    <link href="https://fonts.googleapis.com/css?family=Maitree&amp;subset=latin-ext"
          rel="stylesheet" type="text/css">
    <link href="https://fonts.googleapis.com/css?family=Yantramanav&amp;subset=latin-ext"
          rel="stylesheet" type="text/css">

    <!-- Bootstrap/Custom Styles Setup /-->
    <link rel="stylesheet" href="/blog/assets/highlightjs/styles/arta.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/font-awesome/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/blog/assets/bootswatch/css/custom.min.css" rel="stylesheet" type="text/css" id="theme">
    <link rel="stylesheet" href="/blog/css/theme.css" rel="stylesheet" type="text/css" id="theme" media="screen">

    <!-- Favicon Setup /-->
    <link rel="apple-touch-icon" sizes="180x180" href="/blog/icons/apple-touch-icon.png?v=3">
    <link rel="icon" type="image/png" sizes="32x32" href="/blog/icons/favicon-32x32.png?v=3">
    <link rel="icon" type="image/png" sizes="16x16" href="/blog/icons/favicon-16x16.png?v=3">
    <link rel="manifest" href="/blog/icons/manifest.json?v=3">
    <link rel="mask-icon" href="/blog/icons/safari-pinned-tab.svg?v=3" color="#5bbad5">
    <link rel="shortcut icon" href="/blog/icons/favicon.ico?v=3">
    <meta name="apple-mobile-web-app-title" content="FRMX">
    <meta name="application-name" content="o|b">
    <meta name="msapplication-config" content="/blog/icons/browserconfig.xml?v=3">
    <meta name="theme-color" content="#ffffff">
    
    
    
    
    
  

  </head>
  
  <body>
  
   
    <header class="tiny">
      
<div class="navbar navbar-expand-lg fixed-top navbar-light bg-light">
  <div class="container">
    <div class="navbar-brand-wrapper">
      <a href="/blog/" class="navbar-brand">o|b</a>
    </div>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

   <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav">
        <li class="nav-item">
          <a class="nav-link" href="/blog/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/archives">Archives</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/categories">Categories</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/tags">Tags</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog/authors">Authors</a>
        </li>
        <li class="nav-item dropdown">
          <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#" id="about">About <span class="caret"></span></a>
          <div class="dropdown-menu" aria-labelledby="about">
            <a class="dropdown-item" href="/blog/about/">The Blog</a>
            <a class="dropdown-item" href="/blog/about/contact/">Contact Us</a>
            <a class="dropdown-item" href="/blog/about/powered-by/">Powered By</a>
            <div class="dropdown-divider"></div>
            <a class="dropdown-item" href="/blog/about/license/">License</a>
          </div>
        </li>
      </ul>

      <ul class="nav navbar-nav ml-auto social-nav">
        <li class="nav-item">
          <a href="/blog/atom.xml" alt="Atom Feed">
            <i class="fa fa-feed first"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://twitter.com/oubiwann" alt="Twitter">
            <i class="fa fa-twitter"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="/googleplus" alt="Google+">
            <i class="fa fa-google-plus"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="http://github.com/oubiwann" alt="Github">
            <i class="fa fa-github"></i>
          </a>
        </li>
        <li class="nav-item">
          <a href="https://groups.google.com/forum/#!forum/oubiwann-blog-new-posts"
             alt="Email Notifications">
            <i class="fa fa-envelope"></i>
          </a>
        </li>
      </ul>
    </div>
  </div>
</div>

    </header>
    
    
    <main id="main-content">
      

    <!-- Page Content -->
    <div class="container page-content">

      <div class="row">

        <!-- Post Content Column -->
        <div class="col-lg-12">

          <!-- Title -->
          <h1 class="mt-4">Update: Running an LFE YAWS app in Docker</h1>

          <!-- Author -->
          <p class="lead">
            Posted on November 28,
            2015 by
            <a href="/blog/authors#oubiwann">oubiwann</a>
          </p>

          <ul class="nav nav-tabs">
            <li class="nav-item">
              <a class="nav-link show active" data-toggle="tab" href="#content">Content</a>
            </li>
            <li class="nav-item">
              <a class="nav-link show" data-toggle="tab" href="#metadata">Metadata</a>
            </li>
          </ul>

          <br/>

          <div id="post-content" class="tab-content">
            <div class="tab-pane fade active show" id="content">

          <!-- Post Image -->
          <img class="card-img-top" src="/blog/img/ob-post-7.jpg" alt="Blog post image">

          <hr>

          <!-- Post Content -->
          <p><a href="/assets/images/posts/DockerLogo.png"><img class="left thumb" src="{{ site.base_url }}/assets/images/posts/DockerLogo.png" /></a>Last December we posted a <a href='/tutorials/2014/12/07/1837-running-lfe-in-docker/'>blog entry</a> about Docker <a href='https://www.docker.com/'>Docker</a> and LFE. Since that time there have been several version changes in Erlang, LFE, and the LFE libraries used. In addition, the process to get the demo Dockerized YAWS web app running has been streamlined. This post covers those changes.</p><h2>Setup</h2><p>If you are running on Mac OS X, you'll need to install and start <a href='http://boot2docker.io/'>boot2docker</a>. If you're running on Linux, you'll need to start the ``docker`` services (for instance, on Ubuntu, ``sudo /etc/init.d/docker start``)</p><h3>Port-Forwarding</h3><p>Docker on Linux handles port-redirects between the host and guest just fine; for Docker on Mac OS X, you'll need to setup port-forwarding via SSH:</p><pre><code class="bash">$ boot2docker ssh -L &lt;HOSTMACHINE&gt;:5099:127.0.0.1:5099
</code></pre><p>Then just leave that terminal window open and continue with the rest of this post in another terminal.</p><h2>LFE Exchange Docker Images</h2><p>There are several LFE Docker images to choose from, all available via the LFEX Docker Hub org:</p><ul><li>https://hub.docker.com/u/lfex/</li></ul><p>They are of two different types:</p><ul><li>One image generated from the ``Dockerfile`` maintained in the   <a href='https://github.com/rvirding/lfe/'>official LFE repository</a> using the ``develop``   branch<ul><li>All the others which are maintained in the  <a href='https://github.com/lfex/dockerfiles'>lfex dockerfiles repository</a> are kept in  sync with the official ``develop`` branch but also offer the added  feature of a <a href='https://github.com/rvirding/lfe/pull/116'>color logo banner</a>  when you start up the LFE REPL.</li></ul></li></ul><h2>YAWS LFE Docker Image</h2><p>As part of the update of the old post, I've created a Docker with YAWS and the demo web app pre-installed and ready to go. It's available here:</p><ul><li>https://hub.docker.com/r/oubiwann/lfe-yaws-sample-app/<ul><li>https://github.com/oubiwann/docker-lfe-yaws-sample-app/</li></ul></li></ul><p>For the last blog post we used the <a href='https://hub.docker.com/r/lfex/opensuse/'>OpenSUSE image</a>, but for this one we've based off of the <a href='https://hub.docker.com/r/lfex/debian/'>Debian image</a>, since it's the smallest one.</p><p>If you'd rather build the YAWS LFE sample app Docker image yourself than download it from Docker Hub, simply run ``make docker-build`` from the cloned source directory for the ``docker-lfe-yaws-sample-app`` project.</p><h2>Running the Container</h2><p>Whether you build the image yourself or chose to let ``docker`` download it for you from Docker Hub, either way the same command is used to run the container:</p><pre><code class="bash">$ docker run -p 5099:5099 -t oubiwann/lfe-yaws-sample-app:latest
</code></pre><p>Almost immediately the YAWS app will be up and running. Visiting ``http://<HOSTMACHINE>:5099`` in a web browser will show the running YAWS LFE web app:</p><p><img src="{{ site.base_url }}/assets/images/posts/docker-lfe-sample-app-main-page.png" /></p><h2>The LFE REPL</h2><p>If, instead of running the app server, you'd like to use the LFE REPL on this image with all of the dependent libraries, you can run this command instead:</p><pre><code class="bash">$ docker run -i -t oubiwann/lfe-yaws-sample-app:latest lfe
</code></pre><p><img src="{{ site.base_url }}/assets/images/posts/lfe-color-banner.png" /></p><h2>Why the Update?</h2><p>Due to the question of a curious community member, I'm now preparing a blog post on using YAWS websockets support with an LFE app. I wanted to use the sample app featured in the original LFE Docker blog post (linked at the beginning of this post), but it needed some updates and further finessing ... upon the completion of which, it warranted a new post describing how to use it now.</p><p>Keep your eyes peeled for the websockets post ...</p><h2>An LFE Web App Aside</h2><p>If you'd like to look at the source code for this sample app, it has been made available here:</p><ul><li><a href='https://github.com/oubiwann/docker-lfe-yaws-sample-app'>https://github.com/oubiwann/docker-lfe-yaws-sample-app</a></li></ul><p>It takes advantage of two interesting LFE libraries:</p><ul><li><a href='https://github.com/lfex/lfest'>lfest</a> - a   Clojure/<a href='https://github.com/weavejester/compojure'>Compojure</a>-like   macro for defining app routes<ul><li><a href='https://github.com/lfex/exemplar'>exemplar</a> - an LFE library for HTML as   LFE-native s-expressions</li></ul></li></ul>

            </div>
            <div class="tab-pane fade" id="metadata">

              <table class="table table-hover">
                <tbody>
                  <tr class="table-secondary">
                    <th scope="row">Author</th>
                    <td>oubiwann</td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Date</th>
                    <td>November 28,
        2015</td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Time</th>
                    <td>21:10:08</td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Category</th>
                    <td>
                        <a href="/blog/categories/#LFE">LFE</a>
                    </td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Tags</th>
                    <td>
                      
                      <a href="/blog/tags/#apps">apps</a>
                      
                      <a href="/blog/tags/#boot2docker">boot2docker</a>
                      
                      <a href="/blog/tags/#docker">docker</a>
                      
                      <a href="/blog/tags/#exemplar">exemplar</a>
                      
                      <a href="/blog/tags/#howtos">howtos</a>
                      
                      <a href="/blog/tags/#lfest">lfest</a>
                      
                      <a href="/blog/tags/#ops">ops</a>
                      
                      <a href="/blog/tags/#paas">paas</a>
                      
                      <a href="/blog/tags/#tutorials">tutorials</a>
                      
                      <a href="/blog/tags/#web">web</a>
                      
                    </td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Line&nbsp;Count</th>
                    <td>4 </td>
                  </tr>
                  <tr class="table-secondary">
                    <th scope="row">Word&nbsp;Count</th>
                    <td>543 </td>
                  </tr>
                  <tr class="table-light">
                    <th scope="row">Character&nbsp;Count</th>
                    <td>4749 </td>
                  </tr>
                </tbody>
              </table>

            </div>
          </div>

          <hr>

          <!-- Comments Note -->
          <div class="card my-4">
            <h5 class="card-header">Comments?</h5>
            <div class="card-body">
              This blog doesn't use standard (embedded) comments; however, since
              the site is hosted on Github, if there <emphasis>is</emphasis>
              something you'd like to share, please do so by
              <a href="https://github.com/oubiwann/blog/issues/new">opening a
              "comment" ticket!</a>
            </div>
          </div>

        </div>

      </div>
      <!-- /.row -->

    </div>
    <!-- /.container -->

<!-- End main page content -->

    </main>
    
    
    <footer id="footer">
      
        <div class="row">
          <div class="col-lg-6">

            <ul class="list-unstyled">
              <li class="text-muted">Blogs</li>
              <li><a href="http://oubiwann.blogspot.com">Electric Duncan</a></li>
              <li><a href="http://blog.lfe.io/">LFE Blog</a></li>
              <li><a href="http://clojang.lfe.io/">Clojang</a></li>
              <li><a href="https://clozhang.github.io/blog/">Clozhang</a></li>
            </ul>

          </div>
          <div class="col-lg-6">
            <ul class="list-unstyled">
              <li class="float-lg-right text-muted">Github orgs</li>
              <li class="float-lg-right"><a href="https://github.com/erlsci">erlsci</a></li>
              <li class="float-lg-right"><a href="https://github.com/lfex">lfex</a></li>
              <li class="float-lg-right"><a href="https://github.com/clozhang">clozhang</a></li>
              <li class="float-lg-right"><a href="https://github.com/clojang">clojang</a></li>
              <li class="float-lg-right"><a href="https://github.com/clojusc">clojusc</a></li>
              <li class="float-lg-right"><a href="https://github.com/hexagram30">hexagram30</a></li>
            </ul>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-6">
          </div>
          <div class="col-lg-6">
            <ul class="list-unstyled">

              <li class="float-lg-right"><a href="https://github.com/masteringmatplotlib">masteringmatplotlib</a></li>
              <li class="float-lg-right"><a href="https://github.com/usgs-lcmap">usgs-lcmap</a></li>
              <li class="float-lg-right"><a href="https://github.com/nasa-ngap-archives">nasa-ngap-archives</a></li>
              <li class="float-lg-right"><a href="https://github.com/nasa-cmr-archives">nasa-cmr-archives</a></li>

            </ul>
          </div>
        </div>

        <div class="row">
          <div class="col-lg-12">
            <p><a href="http://creativecommons.org/licenses/by-sa/4.0/">
              <img src="https://licensebuttons.net/l/by-sa/4.0/88x31.png">
            </a></p>
            <p class="text-muted">Content released under a <a href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License.</a>.</p>
            <p class="text-muted">Copyright &copy; Duncan McGreggor, 2003-2019</p>
          </div>
        </div>


    </footer>
    
    
    <script src="/blog/assets/jquery/dist/jquery.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/popper.js/dist/umd/popper.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/bootstrap/dist/js/bootstrap.min.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/bootswatch/js/custom.js" crossorigin="anonymous"></script>
    <script src="/blog/assets/highlightjs/highlight.pack.js"></script>
    <script>hljs.initHighlightingOnLoad();</script>

    
  
  </body>
</html>
